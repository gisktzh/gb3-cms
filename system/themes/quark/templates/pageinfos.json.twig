{% set flex = grav.get('flex_objects') %}
{% set pageinfos = flex.directory('pageinfos') %}
{% set collection = pageinfos.getCollection() %}

{% set current_month = 'today'|date('Ymd') %}
{% set active_items = collection
    |map(active_item_entry => active_item_entry.header)
    |filter(active_item => (active_item.from_date|date('Ymd') <= current_month and active_item.to_date|date('Ymd') >= current_month)) %}

{"page-infos":[
{{- active_items|map(active_item => active_item|json_encode)|join(',')|raw -}}
]}
